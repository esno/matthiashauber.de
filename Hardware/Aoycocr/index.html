<!doctype html>
<html>

<head>
  <meta charset="UTF-8" />
  <meta name="description" content="open-source tech stuff" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,300&display=swap" rel="stylesheet" />
  <link href="../../style.css" rel="stylesheet" />
  <title>matthiashauber - open-source tech stuff</title>

<meta name="google-adsense-account" content="ca-pub-7731755775472874">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7731755775472874"
     crossorigin="anonymous"></script>

</head>

<body>
  <div class="sidebar">
    <div class="viewport">
      <div class="topbar">
        <a class="title" href="../../">matthiashauber</a>
        <span class="description">open-source tech stuff</span>
      </div>
      <div class="navigation"><a href="../../">welcome!</a> » <a href="../">Hardware</a> » <span>Aoycocr</span></div>
    </div>
  </div>

  <div class="viewport mainview">
    <div class="directories">
      <a class="back sidelink" href="../">« Back</a>
    </div>
    <div class="page">
      <div class="content"><div id="eu6s.md" class="text">
<h1>Aoycocr Smart Plug (EU6S)</h1>

<p>The Aoycocr smart plug supports only 2.4 GHz wifi. It has a meter for
power consumption built-in.
Booting the smart plug opens a wifi access point "SmartLife-<id>".</p>

<h2>Tuya</h2>

<p>Tuya is a platform that provides wifi modules either with their own firmware
or with customizations but all devices are shipped with the promise of Tuya that
they are compatible with each tuya compliant app.</p>

<p>This fact ensures that tuya compliant smart plug like the Aoycocr EU6S can
be easily flashed via <a href="https://github.com/ct-Open-Source/tuya-convert">tuya-convert</a>.</p>

<h3>tuya-convert</h3>

<p>Since I am ordering smart devices on a regular basis and I don't want to setup
the tuya-convert environment again and again I decided to bring it into a linux container
on my lil home server with a wifi module built-in.
If your box doesn't have wifi built-in a wifi dongle should helped out.</p>

<p>Unfortunatelly the tuya-convert tooling requires to setup a wifi AP at it's own and
keep track on connected devices via a dnsmasq instance launched by tuya-convert.</p>

<p>On my box I had to install <code>iw</code> for wifi passthrough into lxc otherwise the interface
can't be renamed and moved into a network namespace. LXC needs to rethink that to implement
the kernel interface by their own.</p>

<p>To add the wifi interface wlan0 to your lxc container just add the following three lines into
the container config.</p>

<pre><code>lxc.net.1.type = phys
lxc.net.1.link = wlan0
lxc.net.1.flags = up
</code></pre>

<p>Follow the instructions on tuya-convert's readme for installation and flashing.
Tuya-convert should come with a version of tasmota and ESPurna.</p>

<h2>esphome</h2>

<p>After setting up your tuya-convert environment it's time to flash esphome directly onto
the smartplug.</p>

<p>Create a node config and press <code>INSTALL</code> -> <code>Manual download</code>.</p>

<pre><code># aoycocr-eu6s.yaml:
esphome:
  name: "Aoycocr EU6S"
  platform: ESP8266
  board: esp8285

# Enable logging
logger:

# Enable Home Assistant API
api:
  password: $api_pw

ota:
  password: $ota_pw

wifi:
  ssid: $wifi_essid
  password: $wifi_psk

  # Enable fallback hotspot (captive portal) in case wifi connection fails
  ap:
    ssid: $friendly_name
    password: ${wifi_ap_psk}

captive_portal:

binary_sensor:
  - platform: gpio
    name: "button"
    pin:
      number: GPIO13
      mode:
        input: true
        pullup: true
    on_press:
      - switch.toggle: relay

switch:
  - platform: gpio
    name: "relay"
    pin: GPIO15
    id: relay
    restore_mode: ALWAYS_OFF
    on_turn_on:
      - switch.turn_on: led
    on_turn_off:
      - switch.turn_off: led

  - platform: gpio
    name: "led"
    pin: GPIO2
    id: led
    inverted: True
</code></pre>

<p>As soon as esphome compiled your customized firmware a download dialog pops up.
Download the firmware and place it into the <code>files</code> directory of tuya-convert.</p>

<p>After starting the flash procedure the custom esphome firmware will be listed as
available option. Select it and go ahead.</p>

<pre><code>[...]
Ready to flash third party firmware!

For your convenience, the following firmware images are already included in this repository:
  Tasmota v8.1.0.2 (wifiman)
  ESPurna 1.13.5 (base)

You can also provide your own image by placing it in the /files directory
Please ensure the firmware fits the device and includes the bootloader
MAXIMUM SIZE IS 512KB

Available options:
  0) return to stock
  1) flash aoycocr-eu6s.bin
  2) flash espurna.bin
  3) flash tasmota.bin
  4) flash tasmota-lite.bin
  q) quit; do nothing
Please select 0-4: 1
Are you sure you want to flash aoycocr-eu6s.bin? This is the point of no return [y/N] y
Attempting to flash aoycocr-eu6s.bin, this may take a few seconds...
Flashed http://10.42.42.1/files/aoycocr-eu6s.bin successfully in 10620ms, rebooting...

HAVE FUN!
======================================================
Do you want to flash another device? [y/N] n
======================================================
Cleaning up...
Closing AP
Exiting...
</code></pre>

<p>Have fun with your new esphome device.</p>

</div><div class="gallery"><a href="aoycocr-eu6s.jpg"><img src="aoycocr-eu6s.jpg"/><span>aoycocr-eu6s</span></a></div><div class="footer">September 2025 - powered by <a href="https://github.com/shagu/webls">webls</a></div></div>
    </div>
  </div>
</body>

</html>
